<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentjs</title>
</head>

<body>
    <h1>Todo list</h1>

    <div>
        <button onclick="handlers.displayTodos()">Display Todos</button>
        <button onclick="handlers.toggleAll()">Toggle All</button>
    </div>

    <div>
        <!-- text input cu buton de add -->
        <button onclick="handlers.addTodo()">Add</button>
        <input id="addTodoTextInput" type="text"> 
    </div>

    <div>
        <!-- text input cu 2 atribute care schimba itemurile  -->
        <button onclick="handlers.changeTodo()">Change Todo</button>
        <input id="changeTodoPositionInput" type="number">
        <input id="changeTodoTextInput" type="text"> 
    </div>

    <div>
        <!-- text input cu 2 atribute care sterge itemurile -->
        <button onclick="handlers.deleteTodo()">Delete Todo</button>
        <input id="deleteTodoPositionInput" type="number">
        <input id="deleteTodoWordInput" type="number">
    </div>

    <div>
        <!-- text input cu pozitia itemului care va fi toggluit -->
        <button onclick="handlers.toggleCompleted()">Toggle Completed</button>
        <input id="toggleCompletedPositionInput" type="number">
    </div>

    <ul>
    
    </ul>

    <script>

        var todoList = {
            todos: [],
            displayTodos: function () {
                //verifica daca lista todos este goala si afiseaza ca este goala
                if (this.todos.length === 0) {
                    console.log('Your todo list is empty!');
                } else {
                /*daca lista nu este goala, atunci continua sa adauge 1 de fiecare data cand lungimea listei este mai mare decat 0/ 1/ 2... 
                afiseaza valoarea lui i*/
                    console.log('My todos:');
                    for (var i = 0; i < this.todos.length; i++) {
                        // console.log(this.todos[i].todoText);

                        //verifica daca valoarea completed este true si afiseaza x
                        if (this.todos[i].completed === true) {
                            console.log('(x)', this.todos[i].todoText);
                        //daca valoarea completed nu este true, afiseaza emtpy space
                        } else {
                            console.log('()', this.todos[i].todoText);
                        }

                    }
                }
            },
            /*adauga todoText (la care se face referinta mai sus la afisare) 
            ii da automat completed false*/
            addTodo: function (todoText) {
                this.todos.push({
                    todoText: todoText,
                    completed: false
                });
                this.displayTodos();
            },
            changeTodo: function (position, todoText) {
                this.todos[position].todoText = todoText;
                this.displayTodos();
            },
            deleteTodo: function (position, word = 1) {
                this.todos.splice(position, word);
                this.displayTodos();
            },
            // modifica valoarea la completed (by default false) a unui todo in opusul sau (true)
            toggleCompleted: function (position) {
                var todo = this.todos[position];
                todo.completed = !todo.completed;
                this.displayTodos();
            },

            toggleAll: function() {
                var totalTodos = this.todos.length;
                var completedTodos = 0;
                //verifica cate itemuri sunt completed
                    for (var i=0; i<totalTodos; i++) {
                        if (this.todos[i].completed === true) {
                        completedTodos++;
                        }
                    }   
                            //daca toate sunt complete (true), le face uncheck (false)
                        if (completedTodos === totalTodos) {
                            for (var i= 0; i<totalTodos; i++) {
                            this.todos[i].completed = false;
                            }
                            //daca nu toate sunt complete (true), atunci le face pe toate true
                        } else {
                            for (var i=0; i<totalTodos; i++) {
                            this.todos[i].completed = true;
                            }
                        }
                        this.displayTodos();
            }
               
        };
    
        var handlers = {
            displayTodos: function () {
                todoList.displayTodos();
            },
            toggleAll: function () {
                todoList.toggleAll();
            },
            addTodo: function () {
                //face call la id-ul de input din html care adauga elemente
                var addTodoTextInput = document.getElementById("addTodoTextInput");
                //face call la functia addTodo din obiectul todoList, cu valoarea atributului add TodoText Input
                todoList.addTodo(addTodoTextInput.value);
                //dupa ce textul a fost scris si butonul apasat, textul se sterge
                addTodoTextInput.value='';
            },
            changeTodo: function() {
                //face call la id-ul de input din HTML care schimba elementele, pozitia lor si cuvantul schimbat
                var changeTodoPositionInput = document.getElementById("changeTodoPositionInput");
                var changeTodoTextInput = document.getElementById("changeTodoTextInput");
                //face call la functia changeTodo din obiectul todoList, cu atributele de pozitie si cuvantul schimbat
                todoList.changeTodo(changeTodoPositionInput.valueAsNumber, changeTodoTextInput.value);
                changeTodoPositionInput.value = '';
                changeTodoTextInput.value ='';
            },
            deleteTodo: function() {
                // face call la id-ul de input din HTML care sterg elementele
                var deleteTodoPositionInput = document.getElementById("deleteTodoPositionInput");
                var deleteTodoWordInput = document.getElementById("deleteTodoWordInput");
                todoList.deleteTodo(deleteTodoPositionInput.valueAsNumber, deleteTodoWordInput.valueAsNumber = 1);
                deleteTodoPositionInput.value='';
                deleteTodoWordInput.value='';

            },
            toggleCompleted: function () {
                // face call la id-ul de input din HTML care selecteaza itemurile completate
                var toggleCompletedPositionInput = document.getElementById("toggleCompletedPositionInput");
                todoList.toggleCompleted(toggleCompletedPositionInput.valueAsNumber);
                toggleCompletedPositionInput.value='';
            }
        };

        var view = {
            displayTodos: function () {
                //variabile todosUl selecteaza sectiunea ul din codul HTML
                var todosUl= document.querySelector("ul");
                todosUl.innerHTML = '';

                //calculeaza cate itemuri avem in todo list
                for (var i=0; i<todoList.todos.length; i++) {
                    // creeaza elementul li
                    var todoLi = document.createElement("li");
                    // ii atribuie elementului li pozitia de child in Ul
                    todosUl.appendChild(todoLi);
                }

            }
        };

    </script>
</body>

</html>